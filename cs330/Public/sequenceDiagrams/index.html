<?xml version="1.0" encoding="UTF-8"?><html><head><meta charset="UTF-8"/><link href="../../styles/md-scroll.css" media="screen, projection, print" rel="stylesheet" type="text/css"/><link href="../../styles/md-scroll-ext.css" media="screen, projection, print" rel="stylesheet" type="text/css"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="../../styles/highlight.js/styles/googlecode.css" rel="stylesheet"/><script src="../../styles/highlight.js/highlight.min.js"> </script><script>hljs.initHighlightingOnLoad();</script><script src="../../styles/md-scroll.js" type="text/javascript"> </script><script src="../../styles/md-scroll-ext.js" type="text/javascript"> </script><script src="../../styles/rawdeflate.js" type="text/javascript"> </script><script src="../../styles/plantuml.js" type="text/javascript"> </script><script src="../../styles/mermaid.min.js" type="text/javascript"> </script><script type="text/javascript">
             window.MathJax = {
               tex2jax: {
               inlineMath: [ ['$','$'], ["\\(","\\)"] ],
               processEscapes: true
             }
           };
           </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"> </script><title>Interaction Diagrams</title></head><body><script>sshowControl0 = { counter: 1,
             showNumber: 0, max: 1};
             window.onhashchange = hashHasChanged;</script><div class="navHeader" id="slideshowControlA0"><table class="navHeader"><tr class="slideshowcontrol"><td class="slideshowcontrolLeft"/><td class="slideshowcontrolMiddle">
<a class="imgLink" href="../../Directory/outline/index.html" title="Course home/outline"><img src="../../graphics/home.png"/></a>
<a href="mailto:tkennedy@cs.odu.edu?subject=CS330%2C%20Interaction%20Diagrams"><img src="../../graphics/email.png" title="Email to instructor"/></a><span style="margin: 0 32px;"/></td><td class="slideshowcontrolRight"/></tr></table></div><div class="mainBody"><div class="titleblock"><h1 class="title">Interaction Diagrams</h1><h2 class="author">Steven Zeil</h2><div class="date">Last modified: Nov 17, 2023</div></div><div class="toc">Contents:<div class="toc-h1"><a href="#collaboration-diagrams">1 Collaboration Diagrams</a></div><div class="toc-h2"><a href="#control-flow">1.1 Control Flow</a></div><div class="toc-h2"><a href="#sequencing">1.2 Sequencing</a></div><div class="toc-h1"><a href="#sequence-diagrams">2 Sequence Diagrams</a></div><div class="toc-h2"><a href="#sequence-diagram-components">2.1 Sequence Diagram Components</a></div><div class="toc-h2"><a href="#control-flow">2.2 Control Flow</a></div></div><p>UML Interaction diagrams describe how groups of objects collaborate in  some behavior.</p>
    <ul>
  <li><span class="emph">Important</span>: these diagrams are about  <span class="emph">objects</span>. The UML class diagrams that we looked at  earlier are about (surprise!) <span class="emph">classes</span>.</li>
</ul><hr/><p><strong>UML: Objects vs. Classes</strong></p>
    <p>Remember that, in UML, these represent classes:</p>
    <p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="attributes.png" style="max-width: 50%;"/></div>
    </p>
    <p>But now we want objects:</p>
    <p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="objects.png" style="max-width: 40%;"/></div>
    </p>
    <ul>
  <li>
  <p>Note the underlining and non-bold face.</p>
    </li>
  <li>
  <p>The syntax for the text describing the object is similar to the  attributes in the class diagrams.</p>
    </li>
</ul><hr/><p><strong>Two Kinds of Interaction Diagrams</strong></p>
    <p>We’ll use these objects in two different kinds of interaction  diagrams:</p>
    <ul>
  <li>
  <p>Sequence diagrams</p>
    </li>
  <li>
  <p>Collaboration diagrams</p>
    </li>
</ul><a id="collaborationdiagrams"/><h1 id="collaboration-diagrams">1 Collaboration Diagrams</h1><p>An older technique for diagramming collaborations. These are easier to read for small, simple cases, but less useful for complicated sequences of messages.</p>
    <hr/><p><strong>Components of a Collaboration Diagram</strong></p>
    <p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="ssEvalCollab.png" style="max-width: 50%;"/></div>
    </p>
    <ul>
  <li>
  <p>The main components of a collaboration diagram are  <span class="firstterm">objects</span></p>
    </li>
  <li>
  <p>Objects that exchange messages are joined by  <span class="firstterm">links</span>, shown as solid lines running from one  object to another.</p>
    </li>
  <li>
  <p>If one object passes a message to (calls a member function of)  another, we write the message name alongside the link, with an arrow  showing the direction of the message.</p>
    </li>
</ul><a id="controlflow"/><h2 id="control-flow">1.1 Control Flow</h2><h3 id="guards">1.1.1 Guards</h3><p>There is a limited capacity for indicating control flow.</p>
    <p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="ssEvalCollab.png" style="max-width: 50%;"/></div>
    </p>
    <ul>
  <li>
  <p>A <span class="firstterm">guard</span> indicates that a call is  conditional. Guards are written as boolean expressions inside square  brackets.</p>
    </li>
  <li>
  <p>An <code>*</code> in front of a call indicates that the call can be performed multiple times.</p>
    </li>
  <li>
  <p>This is often followed by a guard representing the loop  condition.</p>
    </li>
</ul><h2 id="sequencing">1.2 Sequencing</h2><p><div class="noFloat"> </div>
    <img src="observer.png" style="float: right; max-width: 50%;"/> Collaboration diagrams work well in situations  like this where the focus is on <span class="emph">what</span> the relevant  messages are.</p>
    <ul>
  <li>But if the order of the messages is important to understanding the  collaboration, then something like this</li>
</ul><p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="ssEvalCollab.png" style="max-width: 50%;"/></div>
    </p>
    <p>might not suffice.</p>
    <hr/><p><strong>Simple Sequencing</strong></p>
    <p>We can try to make things clearer by adding <span class="firstterm">sequence numbers</span>.</p>
    <ul>
  <li>The easiest way to do this is to simply order the calls in  time.  </li>
</ul><p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="ssEvalCollabSeq1.png" style="max-width: 50%;"/></div>
    </p>
    <p>This can help a lot.</p>
    <ul>
  <li>Note, however, that it’s far from clear just which of these  calls are in response to which other calls.</li>
</ul><hr/><p><strong>Nested Sequencing</strong></p>
    <p>Another possibility is to use nested sequencing calls, in which  “x.y” indicates the y$^{\text{th}}$ step from within  call# x.</p>
    <p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="ssEvalCollabSeq2.png" style="max-width: 50%;"/></div>
    </p>
    <p>This gets messy very quickly, however.</p>
    <hr/><p><strong>Collaboration Diagrams do not Scale Up</strong></p>
    <p>If we really want to get a handle on both the order and the  cause of messages, we are better off using sequence diagrams.</p>
    <a id="sequencediagrams"/><h1 id="sequence-diagrams">2 Sequence Diagrams</h1><hr/><p><strong>Sequence Diagrams</strong></p>
    <p>These diagrams attempt to show, for some specific use-case or some  common interaction:</p>
    <ul>
  <li>
  <p>what objects are involved</p>
    </li>
  <li>
  <p>what operations are involved, and on which objects</p>
    </li>
  <li>
  <p>what the sequence of operations is</p>
    </li>
</ul><a id="sequencediagramcomponents"/><h2 id="sequence-diagram-components">2.1 Sequence Diagram Components</h2><hr/><p><strong>Sequence Diagram Components</strong></p>
    <p>Our domain or analysis models view the world as objects that interact by exchanging messages. </p>
    <ul>
  <li><span class="firstterm">Sequence diagrams</span> allow us to demonstrate that our model suffices to represent a use case by mapping the steps of the use-case into specific messages (function calls) from one object to another.
    <ul>
      <li>
      <p>we most often draw one sequence diagram for each use case.</p>
    </li>
    </ul>
  </li>
</ul><hr/><p><strong>The Score Essay Use Case</strong></p>
    <p>Here is a sequence diagram for our “Score Essay” use-case. To help understand this, we’ll take this apart, one element at a time, looking at what each one shows us.</p>
    <p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="scoreEssay.png" style="max-width: 60%;"/></div>
    </p>
    <h3 id="objects">2.1.1 Objects</h3><p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="sdExplain-objects.png" style="max-width: 50%;"/></div>
    </p>
    <ul>
  <li>
    <p>A sequence diagram is composed of a number of columns, each headed  by an object.</p>
    
    <ul>
      <li>Human objects are often indicated by a stick figure. In  general, objects are shown as rectangles.</li>
    </ul>
  </li>
  <li>
  <p>Note that, unlike in the class relationship diagrams, the  rectangles here denote individual <span class="emph">objects</span>, not classes. </p>
    </li>
</ul><p><span class="replaceable">objectName</span> : <span class="replaceable">className</span></p>
    <p><span class="replaceable">objectName</span> : <span class="replaceable">className</span></p>
    <p>The colon (:) in front to the remaining name is our cue that </p>
    <ol>
  <li>
  <p>This is still a representation of an object, not of a class, and</p>
    </li>
  <li>
  <p>The name that follows is a class name.</p>
    </li>
</ol><a id="timelines"/><h3 id="time-lines">2.1.2 Time Lines</h3><p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="sdExplain-timeline.png" style="max-width: 50%;"/></div>
    </p>
    <p>The dashed lines are called <span class="firstterm">time lines</span>. </p>
    <ul>
  <li>
  <p>As we move from the  top of the diagram towards the bottom, we are moving forward in time.</p>
    </li>
  <li>
  <p>Something that is drawn below a particular event actually occurs after  it in our scenario.</p>
    </li>
  <li>
  <p>If an object is created/destroyed as part of a scenario, it will  be shown as a shorter time line. </p>
    </li>
</ul><h3 id="messages">2.1.3 Messages</h3><p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="sdExplain-messages.png" style="max-width: 50%;"/></div>
    </p>
    <ul>
  <li>Each solid arrow denotes the passing of a message from one object to  another.
    <p>Or alternatively, a function call made by some code associated with  the first object, calling a member function of the second object.</p>
    
  </li>
</ul><hr/><p><strong>Parameters and Return Values</strong></p>
    <p>As with any function calls, these can include parameters.</p>
    <ul>
  <li>Functions can also have return values, shown as an arrow  with a dashed line.
    <ul>
      <li>
      <p>Normally, show these only when they are important to  the understanding of a diagram (e.g., they match one of the  named objects)</p>
    </li>
    </ul>
  </li>
</ul><hr/><p><strong>Sanity Check 1</strong></p>
    <blockquote>
  <p><span class="emph">Important Sanity Check:</span> If you draw an arrow from one object of type <code>C</code> to an object of type <code>T</code>, and you label that arrow <code>foo</code>, then the class <code>T</code> <span class="emph">must</span> have a function named <code>foo</code> listed as one of its member functions.</p>
    
</blockquote><ul>
  <li>If your CRC cards are still valid</li>
</ul><p>then <code>foo</code> should be a responsibility of <code>T</code> and <code>T</code> should be a collaborator of <code>C</code>.</p>
    <a id="activationboxes"/><h3 id="activation-boxes">2.1.4 Activation Boxes</h3><p>An <span class="firstterm">activation</span> of a function is the information associated with a particular call to that function, including all parameters, local variables, etc. </p>
    <ul>
  <li>If a function is recursive (calls itself or calls other functions  that eventually call it), it can have multiple activations in  memory at any given time.</li>
</ul><hr/><p><strong>Activation Boxes</strong></p>
    <p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="sdExplain-activations.png" style="max-width: 85%;"/></div>
    </p>
    <p>Sequence diagrams are all about time, so we sometimes need to indicate just how long a function call is active</p>
    <ul>
  <li>An activation box marks off the time from the start of execution  of a function body to when we return from that body to its  caller.</li>
</ul><hr/><p><strong>When to Show Activation Boxes</strong></p>
    <ul>
  <li>You <span class="emph">must</span> show activation boxes if a the body of a called  function makes other calls of its own, or if a function has a  return arrow.
    <ul>
      <li>
      <p>Activation boxes are essential to demonstrating cause-and-effect  within the model</p>
    </li>
    </ul>
  </li>
</ul><hr/><p><strong>More Sanity Checks</strong></p>
    <blockquote>
  <p><span class="emph">Sanity check 2:</span> An incoming arrow to an activation box must  connect to the very top of that box.</p>
    
</blockquote><ul>
  <li>We do not have psychic functions that suddenly start  executing themselves in anticipation of being called at some time  in the future.</li>
</ul><blockquote>
  <p><span class="emph">Sanity check 3:</span> Every activation box must either </p>
    
  <ul>
    <li>
    <p>have exactly one incoming arrow, or</p>
    </li>
    <li>
    <p>have no incoming arrows but belong to an autonomous object  (e.g., a human) that initiates a task spontaneously (e.g., the  scorer in this scenario).</p>
    </li>
  </ul>
</blockquote><hr/><p><strong>More Sanity Checks</strong></p>
    <blockquote>
  <p><span class="emph">Sanity check 4:</span> If a function body of <code>foo</code> calls a function <code>bar</code>, the activation box of <code>bar</code> must end <span class="emph">above</span> the end of the activation box of <code>foo</code>.</p>
    
</blockquote><p>That’s just the way functions work.</p>
    <ul>
  <li>If <code>foo</code> calls <code>bar</code>, then <code>foo</code> can’t  actually do <span class="emph">anything</span> (including returning to its  own caller) until <span class="emph">after</span> <code>bar</code> returns.</li>
</ul><p/>
    <blockquote>
  <p><span class="emph">Sanity check 5:</span> If an activation box has an outgoing “return  value” arrow, that arrow must emerge from the very bottom of the box.</p>
    
</blockquote><ul>
  <li>Function bodies do not hang around chatting after they  return control to their caller.  </li>
</ul><hr/><p><strong>More Sanity Checks</strong></p>
    <blockquote>
  <p><span class="emph">Sanity check 6:</span> If an activation box has an outgoing “return value” arrow, that arrow must point back to the caller of that function activation.</p>
    
</blockquote><ul>
  <li>That’s just the way functions work!</li>
</ul><hr/><p><strong>Activations Can Overlap (nest) in Time</strong></p>
    <p>The call/activation box symbols can easily accommodate simultaneous activations of different functions on the same object.</p>
    <blockquote>
  <p><strong>Example</strong></p>
    
  <p>Suppose we have a  spreadsheet in which cell B3 contains the fomula “A1+1” and that a new  formula has recently been placed in A1. A spreadsheet is in the midst  of a call to </p>
    
  <pre><code class="cpp">// Re-evaluate all cells in the spreadsheet
int evaluateAll()   { 
  while(moreToEvaluate()) 
     partialEvaluate();
  return evaluationCounter;
} 

</code></pre>
  <ul>
    <li>
      <p>Each call to <span class="function">partialEvaluate</span> causes one  cell (e.g., A1) to be removed from a queue  <span class="varname">moreToEvaluate</span> and then told to evaluate its  formula.</p>
    
      <ul>
        <li>If that evaluation changes the value in A1, it notifies any cells that are observing it (e.g., B3).</li>
        <li>Those cells tell the spreadsheet that they require evaluation, and the spreadsheet adds them to the queue.</li>
      </ul>
    </li>
    <li>
    <p>On a subsequent pass around the loop, the spreadsheet makes  another call to partialEvaluate that results in B3 being pulled from  the queue and evaluated.  </p>
    </li>
  </ul>
</blockquote><hr/><p><strong>Example: Seq Diagram</strong></p>
    <p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="spreadsheetEval.png" style="max-width: 85%;"/></div>
    </p>
    <p>Observations:</p>
    <ul>
  <li>
    <p>The call to partialEvaluate() is a call from one member function of  an object to another member function of the same object.</p>
    
    <ul>
      <li>
      <p>We often choose not to show these because they really have little to do with the idea of whther the public interface fo a class is OK.</p>
    </li>
      <li>
      <p>Instead, usually concentrate on inter-object messages.</p>
    </li>
    </ul>
  </li>
  <li>
    <p>We have “unrolled” the loop in this diagram because I wanted to show  the specific cells being manipulated each time around the loop.</p>
    
    <ul>
      <li>
      <p>We’ll see other approaches to handling loops shortly.</p>
    </li>
    </ul>
  </li>
  <li>
  <p>Note the stacking of the activation boxes on the SpreadSheet  timeline to illustrate nested periods of time.</p>
    </li>
</ul><hr/><p><strong>Returns</strong></p>
    <p>If you have trouble following the sequence of calls and returns, you can add in the return arrows from the bottom of each activation box:</p>
    <p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="spreadsheetEval_alt.png" style="max-width: 70%;"/></div>
    </p>
    <p>Personally, I find the extra arrows distracting and don’t recommend them for general use. Save them for circumstances where the data being returned in important to the understanding of the diagram (e.g., where you give a name to the returned value so that you can use that name later in the diagram).</p>
    <a id="controlflow"/><h2 id="control-flow">2.2 Control Flow</h2><h3 id="guards">2.2.1 Guards</h3><p>Guards are conditions attached to messages to indicate conditional execution or loops.</p>
    <ul>
  <li>
  <p>Guards are OK if only one call is  repeated/conditional</p>
    </li>
  <li>
  <p>They become confusing when a sequence of messages are  affected.</p>
    </li>
</ul><p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="sdExplain-guards.png" style="max-width: 50%;"/></div>
    </p>
    <h3 id="frames">2.2.2 Frames</h3><p>UML 2.0 introduced <span class="firstterm">frames</span> to group messages</p>
    <p>Most common varieties (identified by label): </p>
    <ul>
  <li>
  <p>diagram label</p>
    </li>
  <li>
  <p>loop: repeated messages</p>
    </li>
  <li>
  <p>opt: conditional messages</p>
    </li>
  <li>
  <p>alt: if-then-else like construct</p>
    </li>
  <li>
  <p>ref: reference to another diagram, becomes a “black box” in  this diagram</p>
    </li>
</ul><hr/><p><strong>Options and Loops</strong></p>
    <p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="scoreEssay.png" style="max-width: 50%;"/></div>
    </p>
    <ul>
  <li>
  <p>Grouping is indicated very naturally by the area of the enclosing  rectangle. We can nest frames if we need to.</p>
    </li>
  <li>
  <p>We use guard expressions (in the <code>[ ]</code>) to  indicate loop and option conditions.</p>
    </li>
</ul><hr/><p><strong>Reference Frames</strong></p>
    <p>We use an outer frame to name our diagram</p>
    <p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="prepareOutcome.png" style="max-width: 50%;"/></div>
    </p>
    <hr/><p><strong>Referring to Other Frames</strong></p>
    <p>And then can reference it in other diagrams</p>
    <p><div class="noFloat"> </div>
    <div style="text-align: center'"><img align="center" src="scoreEssay2.png" style="max-width: 50%;"/></div>
    </p>
    <ul>
  <li>These allow you to break up sequence diagrams into pieces  and have some diagrams “include” or refer to other  diagrams.</li>
</ul></div><script>sshowControl0 = { counter: 1,
             showNumber: 0, max: 1};
             window.onhashchange = hashHasChanged;</script><div class="navFooter" id="slideshowControl0"><table class="navFooter"><tr class="slideshowcontrol"><td class="slideshowcontrolLeft"/><td class="slideshowcontrolMiddle">
<a class="imgLink" href="../../Directory/outline/index.html" title="Course home/outline"><img src="../../graphics/home.png"/></a>
<a href="mailto:tkennedy@cs.odu.edu?subject=CS330%2C%20Interaction%20Diagrams"><img src="../../graphics/email.png" title="Email to instructor"/></a><span style="margin: 0 32px;"/></td><td class="slideshowcontrolRight"/></tr></table></div><div class="copyright">© 2015-2024, Old Dominion Univ.</div></body></html>
